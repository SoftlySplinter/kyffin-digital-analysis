<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>IVT: CStereoMatcher Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript">
$(document).ready(initResizable);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.4 -->
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">IVT</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('class_c_stereo_matcher.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a>  </div>
  <div class="headertitle">
<div class="title">CStereoMatcher Class Reference<div class="ingroups"><a class="el" href="group___stereo_processing.html">Stereo image processing</a></div></div>  </div>
</div>
<div class="contents">
<!-- doxytag: class="CStereoMatcher" -->
<p>Class for computing matches for individual points in stereo image pairs.  
 <a href="class_c_stereo_matcher.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="_stereo_matcher_8h_source.html">StereoMatcher.h</a>&gt;</code></p>

<p><a href="class_c_stereo_matcher-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_c_stereo_matcher.html#a904ee9d8e330a88e12652a7e3172e897">CStereoMatcher</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">The default constructor (and only constructor).  <a href="#a904ee9d8e330a88e12652a7e3172e897"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_c_stereo_matcher.html#aab064040dbc27cd1179352e68562ebb7">~CStereoMatcher</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">The destructor.  <a href="#aab064040dbc27cd1179352e68562ebb7"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_c_stereo_matcher.html#ad30444fde85559080df4aa4195844510">LoadCameraParameters</a> (const char *pCameraParameterFileName)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes the internally used camera model, given a file path to a camera parameter file.  <a href="#ad30444fde85559080df4aa4195844510"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_c_stereo_matcher.html#a51acb639f6b3406e68ef201c20b12e2b">InitCameraParameters</a> (<a class="el" href="class_c_stereo_calibration.html">CStereoCalibration</a> *pStereoCalibration, bool bCloneCalibration)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes the internally used camera model, given an instance of <a class="el" href="class_c_stereo_calibration.html" title="Camera model and functions for a stereo camera system.">CStereoCalibration</a>.  <a href="#a51acb639f6b3406e68ef201c20b12e2b"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_c_stereo_matcher.html#ab687883e1b36e44922122e4e902f073f">GetDisparityEstimate</a> (const float z)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Computes a disparity estimated for a given z-distance.  <a href="#ab687883e1b36e44922122e4e902f073f"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_c_stereo_matcher.html#a828fd66bed7232ade69588d84ec3164e">Match</a> (const <a class="el" href="class_c_byte_image.html">CByteImage</a> *pLeftImage, const <a class="el" href="class_c_byte_image.html">CByteImage</a> *pRightImage, int x, int y, int nWindowSize, int d1, int d2, <a class="el" href="struct_vec2d.html">Vec2d</a> &amp;result, <a class="el" href="struct_vec3d.html">Vec3d</a> &amp;result_3d, float fThreshold, bool bInputImagesAreUndistorted=false)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Computes a disparity estimated for a given z-distance using the Zero-Mean Normalized Cross Correlation (ZNCC).  <a href="#a828fd66bed7232ade69588d84ec3164e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_c_stereo_matcher.html#adce05e3a9f8e571482e6112adc43e434">MatchZSAD</a> (const <a class="el" href="class_c_byte_image.html">CByteImage</a> *pLeftImage, const <a class="el" href="class_c_byte_image.html">CByteImage</a> *pRightImage, int x, int y, int nWindowSize, int d1, int d2, <a class="el" href="struct_vec2d.html">Vec2d</a> &amp;result, <a class="el" href="struct_vec3d.html">Vec3d</a> &amp;result_3d, float fThreshold, bool bInputImagesAreUndistorted=false)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Computes a disparity estimated for a given z-distance using the Zero-Mean Sum of Absolute Differences (ZSAD).  <a href="#adce05e3a9f8e571482e6112adc43e434"></a><br/></td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>Class for computing matches for individual points in stereo image pairs. </p>
<p>This class allows to search for a correspondence in the right image, given a point in the left image of stereo image pair. As correlation function a Zero-Mean Normalized Cross Correlation (ZNCC) is used. The ZNCC is invariant to constant additive and constant multiplicative illumination variations.</p>
<p>The search for the correspondences is performed along the epipolar line. The images must not be rectified (or if rectified, the camera parameters must be updated to be valid for the rectified images). In any case it is recommended to provide the original images - not rectified images.</p>
<p>As result, the corresponence in the right image is computed with subpixel accuracy as well as the 3D point in the world coordinate system by performing stereo triangulation.</p>
<p>Images must be of type <a class="el" href="class_c_byte_image.html#a694d6dc28b747d8a972130106a529f9ea4e26f5d8eb810a3ba6410c8d924a457f">CByteImage::eGrayScale</a>. </p>

<p>Definition at line <a class="el" href="_stereo_matcher_8h_source.html#l00078">78</a> of file <a class="el" href="_stereo_matcher_8h_source.html">StereoMatcher.h</a>.</p>
</div><hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a904ee9d8e330a88e12652a7e3172e897"></a><!-- doxytag: member="CStereoMatcher::CStereoMatcher" ref="a904ee9d8e330a88e12652a7e3172e897" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">CStereoMatcher::CStereoMatcher </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>The default constructor (and only constructor). </p>
<p>Initialization is performed by calling one of the methods <a class="el" href="class_c_stereo_matcher.html#ad30444fde85559080df4aa4195844510" title="Initializes the internally used camera model, given a file path to a camera parameter file...">LoadCameraParameters(const char*)</a> or <a class="el" href="class_c_stereo_matcher.html#a51acb639f6b3406e68ef201c20b12e2b" title="Initializes the internally used camera model, given an instance of CStereoCalibration.">InitCameraParameters(CStereoCalibration*, bool)</a>. </p>

<p>Definition at line <a class="el" href="_stereo_matcher_8cpp_source.html#l00067">67</a> of file <a class="el" href="_stereo_matcher_8cpp_source.html">StereoMatcher.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="aab064040dbc27cd1179352e68562ebb7"></a><!-- doxytag: member="CStereoMatcher::~CStereoMatcher" ref="aab064040dbc27cd1179352e68562ebb7" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">CStereoMatcher::~CStereoMatcher </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>The destructor. </p>

<p>Definition at line <a class="el" href="_stereo_matcher_8cpp_source.html#l00073">73</a> of file <a class="el" href="_stereo_matcher_8cpp_source.html">StereoMatcher.cpp</a>.</p>

</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="ab687883e1b36e44922122e4e902f073f"></a><!-- doxytag: member="CStereoMatcher::GetDisparityEstimate" ref="ab687883e1b36e44922122e4e902f073f" args="(const float z)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int CStereoMatcher::GetDisparityEstimate </td>
          <td>(</td>
          <td class="paramtype">const float&#160;</td>
          <td class="paramname"><em>z</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Computes a disparity estimated for a given z-distance. </p>
<p>The z-distance is defined as the z-coordinate in the camera coordinate system of the left camera. The disparity estimate is computed as the disparity of the point (0, 0, z)^T in the camera coordinate system of the left camera.</p>
<p>Before application of this method, the instance must have been initialized by calling one of the methods <a class="el" href="class_c_stereo_matcher.html#ad30444fde85559080df4aa4195844510" title="Initializes the internally used camera model, given a file path to a camera parameter file...">LoadCameraParameters(const char*)</a> or <a class="el" href="class_c_stereo_matcher.html#a51acb639f6b3406e68ef201c20b12e2b" title="Initializes the internally used camera model, given an instance of CStereoCalibration.">InitCameraParameters(CStereoCalibration*, bool)</a>.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">z</td><td>The z-distance to compute the disparity estimate for. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>the disparity estimate in pixels. </dd></dl>

<p>Definition at line <a class="el" href="_stereo_matcher_8cpp_source.html#l00112">112</a> of file <a class="el" href="_stereo_matcher_8cpp_source.html">StereoMatcher.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a51acb639f6b3406e68ef201c20b12e2b"></a><!-- doxytag: member="CStereoMatcher::InitCameraParameters" ref="a51acb639f6b3406e68ef201c20b12e2b" args="(CStereoCalibration *pStereoCalibration, bool bCloneCalibration)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CStereoMatcher::InitCameraParameters </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_c_stereo_calibration.html">CStereoCalibration</a> *&#160;</td>
          <td class="paramname"><em>pStereoCalibration</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>bCloneCalibration</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Initializes the internally used camera model, given an instance of <a class="el" href="class_c_stereo_calibration.html" title="Camera model and functions for a stereo camera system.">CStereoCalibration</a>. </p>
<p>The camera parameters are needed for knowledge of the epipolar geometry.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">pStereoCalibration</td><td>The pointer to the instance of <a class="el" href="class_c_stereo_calibration.html" title="Camera model and functions for a stereo camera system.">CStereoCalibration</a>. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">bCloneCalibration</td><td>If set to true, an internal instance is created and pStereoCalibration serves as the template instance. If set to false simply the pointer is stored. In any case, deletion of the provided instance pStereoCalibration is not handled by <a class="el" href="class_c_stereo_matcher.html" title="Class for computing matches for individual points in stereo image pairs.">CStereoMatcher</a>. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="_stereo_matcher_8cpp_source.html#l00092">92</a> of file <a class="el" href="_stereo_matcher_8cpp_source.html">StereoMatcher.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="ad30444fde85559080df4aa4195844510"></a><!-- doxytag: member="CStereoMatcher::LoadCameraParameters" ref="ad30444fde85559080df4aa4195844510" args="(const char *pCameraParameterFileName)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool CStereoMatcher::LoadCameraParameters </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>pCameraParameterFileName</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Initializes the internally used camera model, given a file path to a camera parameter file. </p>
<p>The file must contain the parameters for the used stereo camera system. Details on the file format and camera calibration can be found in <a class="el" href="class_c_stereo_calibration.html#abc63d9b4bb1e8e27b6348bc77f03e62d" title="Initializes the stereo camera model, given a file path to a stereo camera parameter file...">CStereoCalibration::LoadCameraParameters</a>.</p>
<p>The camera parameters are needed for knowledge of the epipolar geometry.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">pCameraParameterFileName</td><td>The file path to the camera parameter file to be loaded. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>true on success and false on failure. </dd></dl>

<p>Definition at line <a class="el" href="_stereo_matcher_8cpp_source.html#l00084">84</a> of file <a class="el" href="_stereo_matcher_8cpp_source.html">StereoMatcher.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a828fd66bed7232ade69588d84ec3164e"></a><!-- doxytag: member="CStereoMatcher::Match" ref="a828fd66bed7232ade69588d84ec3164e" args="(const CByteImage *pLeftImage, const CByteImage *pRightImage, int x, int y, int nWindowSize, int d1, int d2, Vec2d &amp;result, Vec3d &amp;result_3d, float fThreshold, bool bInputImagesAreUndistorted=false)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int CStereoMatcher::Match </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_c_byte_image.html">CByteImage</a> *&#160;</td>
          <td class="paramname"><em>pLeftImage</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_c_byte_image.html">CByteImage</a> *&#160;</td>
          <td class="paramname"><em>pRightImage</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>x</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>y</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>nWindowSize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>d1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>d2</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_vec2d.html">Vec2d</a> &amp;&#160;</td>
          <td class="paramname"><em>result</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_vec3d.html">Vec3d</a> &amp;&#160;</td>
          <td class="paramname"><em>result_3d</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>fThreshold</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>bInputImagesAreUndistorted</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Computes a disparity estimated for a given z-distance using the Zero-Mean Normalized Cross Correlation (ZNCC). </p>
<p>The z-distance is defined as the z-coordinate in the camera coordinate system of the left camera. The disparity estimate is computed as the disparity of the point (0, 0, z)^T in the camera coordinate system of the left camera.</p>
<p>The width and height of pInputImage and pOutputImage must match. pInputImage and pOutputImage must be both of type <a class="el" href="class_c_byte_image.html#a694d6dc28b747d8a972130106a529f9ea4e26f5d8eb810a3ba6410c8d924a457f">CByteImage::eGrayScale</a>.</p>
<p>Before application of this method, the instance must have been initialized by calling one of the methods <a class="el" href="class_c_stereo_matcher.html#ad30444fde85559080df4aa4195844510" title="Initializes the internally used camera model, given a file path to a camera parameter file...">LoadCameraParameters(const char*)</a> or <a class="el" href="class_c_stereo_matcher.html#a51acb639f6b3406e68ef201c20b12e2b" title="Initializes the internally used camera model, given an instance of CStereoCalibration.">InitCameraParameters(CStereoCalibration*, bool)</a>.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">pLeftImage</td><td>The left camera image. Must be of type <a class="el" href="class_c_byte_image.html#a694d6dc28b747d8a972130106a529f9ea4e26f5d8eb810a3ba6410c8d924a457f">CByteImage::eGrayScale</a>. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">pRightImage</td><td>The right camera image. Must be of type <a class="el" href="class_c_byte_image.html#a694d6dc28b747d8a972130106a529f9ea4e26f5d8eb810a3ba6410c8d924a457f">CByteImage::eGrayScale</a>. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">x</td><td>The x-coordinate of the point in pLeftImage to search a correspondence for in pRightImage. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">y</td><td>The y-coordinate of the point in pLeftImage to search a correspondence for in pRightImage. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">nWindowSize</td><td>Specifies the size of the correlation window, which is nWindowSize x nWindowSize. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">d1</td><td>The minimum disparity, defining the starting point of the search. Must be &gt;= 0. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">d2</td><td>The maximum disparity, defining the end point of the search. Must be &gt; d1. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">result</td><td>The computed correspondence in the pRightImage, with subpixel accuracy. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">result_3d</td><td>The computed 3D point, expressed in the world coordinate system. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">fThreshold</td><td>The threshold for the Zero Mean-Normalized Cross Correlation (ZNCC). As the ZNCC is a similarity measure (not an error measure) the greater the value the greater is the similarity. The maximum value that can be achieved is 1. fThreshold = 0.0f practically accepts all correspondences, fThreshold = 0.5f can be considered as a relatively non-restrictive threshold, fThrehold = 0.8f can be considered as a relatively restrictive threshold. The choice of this value depends on the quality of the images and the application. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">bInputImagesAreUndistorted</td><td>If set to false (default value) the input coordinates are undistorted before performing the search. If set to true, it is assumed that the images are already undistorted, thus not undistorting the coordinates.<br/>
 <b>As the epipolar geometry is only valid for the linear mapping, it is strictly recommended to undistort the images, if the lens distortions have an observable effect.</b> </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>the disparity &gt;= 0 in case of success. Returns -1 if the images (equal size, type) do not meet the conditions. Returns -2 if no match could be found. </dd></dl>

<p>Definition at line <a class="el" href="_stereo_matcher_8cpp_source.html#l00125">125</a> of file <a class="el" href="_stereo_matcher_8cpp_source.html">StereoMatcher.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="adce05e3a9f8e571482e6112adc43e434"></a><!-- doxytag: member="CStereoMatcher::MatchZSAD" ref="adce05e3a9f8e571482e6112adc43e434" args="(const CByteImage *pLeftImage, const CByteImage *pRightImage, int x, int y, int nWindowSize, int d1, int d2, Vec2d &amp;result, Vec3d &amp;result_3d, float fThreshold, bool bInputImagesAreUndistorted=false)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int CStereoMatcher::MatchZSAD </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_c_byte_image.html">CByteImage</a> *&#160;</td>
          <td class="paramname"><em>pLeftImage</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_c_byte_image.html">CByteImage</a> *&#160;</td>
          <td class="paramname"><em>pRightImage</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>x</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>y</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>nWindowSize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>d1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>d2</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_vec2d.html">Vec2d</a> &amp;&#160;</td>
          <td class="paramname"><em>result</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_vec3d.html">Vec3d</a> &amp;&#160;</td>
          <td class="paramname"><em>result_3d</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>fThreshold</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>bInputImagesAreUndistorted</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Computes a disparity estimated for a given z-distance using the Zero-Mean Sum of Absolute Differences (ZSAD). </p>
<p>The z-distance is defined as the z-coordinate in the camera coordinate system of the left camera. The disparity estimate is computed as the disparity of the point (0, 0, z)^T in the camera coordinate system of the left camera.</p>
<p>The width and height of pInputImage and pOutputImage must match. pInputImage and pOutputImage must be both of type <a class="el" href="class_c_byte_image.html#a694d6dc28b747d8a972130106a529f9ea4e26f5d8eb810a3ba6410c8d924a457f">CByteImage::eGrayScale</a>.</p>
<p>Before application of this method, the instance must have been initialized by calling one of the methods <a class="el" href="class_c_stereo_matcher.html#ad30444fde85559080df4aa4195844510" title="Initializes the internally used camera model, given a file path to a camera parameter file...">LoadCameraParameters(const char*)</a> or <a class="el" href="class_c_stereo_matcher.html#a51acb639f6b3406e68ef201c20b12e2b" title="Initializes the internally used camera model, given an instance of CStereoCalibration.">InitCameraParameters(CStereoCalibration*, bool)</a>.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">pLeftImage</td><td>The left camera image. Must be of type <a class="el" href="class_c_byte_image.html#a694d6dc28b747d8a972130106a529f9ea4e26f5d8eb810a3ba6410c8d924a457f">CByteImage::eGrayScale</a>. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">pRightImage</td><td>The right camera image. Must be of type <a class="el" href="class_c_byte_image.html#a694d6dc28b747d8a972130106a529f9ea4e26f5d8eb810a3ba6410c8d924a457f">CByteImage::eGrayScale</a>. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">x</td><td>The x-coordinate of the point in pLeftImage to search a correspondence for in pRightImage. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">y</td><td>The y-coordinate of the point in pLeftImage to search a correspondence for in pRightImage. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">nWindowSize</td><td>Specifies the size of the correlation window, which is nWindowSize x nWindowSize. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">d1</td><td>The minimum disparity, defining the starting point of the search. Must be &gt;= 0. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">d2</td><td>The maximum disparity, defining the end point of the search. Must be &gt; d1. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">result</td><td>The computed correspondence in the pRightImage, with subpixel accuracy. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">result_3d</td><td>The computed 3D point, expressed in the world coordinate system. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">fThreshold</td><td>The threshold for the Zero-Mean Sum of Absolute Differences (ZSAD). As the ZSAD is an error measure, the smaller the value the greater is the similarity. The minimum value that can be achieved is 0. fThreshold = 255.0f accepts all correspondences. The choice of this value depends on the quality of the images and the application. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">bInputImagesAreUndistorted</td><td>If set to false (default value) the input coordinates are undistorted before performing the search. If set to true, it is assumed that the images are already undistorted, thus not undistorting the coordinates.<br/>
 <b>As the epipolar geometry is only valid for the linear mapping, it is strictly recommended to undistort the images, if the lens distortions have an observable effect.</b> </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>the disparity &gt;= 0 in case of success. Returns -1 if the images (equal size, type) do not meet the conditions. Returns -2 if no match could be found. </dd></dl>

<p>Definition at line <a class="el" href="_stereo_matcher_8cpp_source.html#l00169">169</a> of file <a class="el" href="_stereo_matcher_8cpp_source.html">StereoMatcher.cpp</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>src/Image/<a class="el" href="_stereo_matcher_8h_source.html">StereoMatcher.h</a></li>
<li>src/Image/<a class="el" href="_stereo_matcher_8cpp_source.html">StereoMatcher.cpp</a></li>
</ul>
</div>
</div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="class_c_stereo_matcher.html">CStereoMatcher</a>      </li>
      <li class="footer">Generated on Thu May 24 2012 16:39:58 for IVT by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.4 </li>
    </ul>
  </div>

</body>
</html>
